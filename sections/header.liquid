<header class="site-header" role="banner">
  <div class="container header-row">
    <a class="logo" href="{{ routes.root_url }}" aria-label="{{ shop.name }}">
      {{ shop.name }}
    </a>

    <nav class="main-nav" role="navigation" aria-label="Main">
      <ul class="nav-list">
        {%- if section.settings.menu != blank -%}
          {%- for link in section.settings.menu.links -%}
            <li><a href="{{ link.url }}">{{ link.title }}</a></li>
          {%- endfor -%}
            {%- else -%}
          <li><a href="{{ routes.root_url }}">Home</a></li>
          <li><a href="{{ routes.all_products_collection_url | default: '/collections/all' }}">Shop All</a></li>
            {%- endif -%}
      </ul>
    </nav>

    <div class="header-ctas">
      {%- if section.settings.enable_search -%}
        <a href="{{ routes.search_url }}" class="icon-btn" aria-label="Search">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="8" cy="8" r="6"/>
            <path d="M13 13l4 4"/>
          </svg>
        </a>
      {%- endif -%}

      {%- if shop.customer_accounts_enabled -%}
        <a href="{{ routes.account_url }}" class="icon-btn" aria-label="Account">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="10" cy="6" r="3"/>
            <path d="M4 18c0-3.3 2.7-6 6-6s6 2.7 6 6"/>
          </svg>
        </a>
      {%- endif -%}

      <button type="button" class="icon-btn cart-btn" data-open-cart aria-label="Open cart">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M6 1L3 6v13h14V6l-3-5M3 6h14M13 10a3 3 0 01-6 0"/>
        </svg>
        {%- if cart.item_count > 0 -%}
          <span class="cart-badge" data-cart-count>{{ cart.item_count }}</span>
        {%- endif -%}
      </button>
      
      <button class="burger" data-open-menu aria-label="Open menu">☰</button>
    </div>
          </div>

  <!-- Mobile drawer -->
  <div class="mobile-drawer" hidden aria-hidden="true">
    <div class="mobile-panel" role="dialog" aria-modal="true" aria-label="Menu">
      <button class="mobile-close" data-close-menu aria-label="Close menu">×</button>
      <ul class="mobile-list">
        {%- if section.settings.menu != blank -%}
          {%- for link in section.settings.menu.links -%}
            <li><a href="{{ link.url }}">{{ link.title }}</a></li>
          {%- endfor -%}
        {%- else -%}
          <li><a href="{{ routes.root_url }}">Home</a></li>
          <li><a href="{{ routes.all_products_collection_url | default: '/collections/all' }}">Shop All</a></li>
        {%- endif -%}
      </ul>
    </div>
    <div class="mobile-overlay" data-close-menu></div>
    </div>
  </header>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "checkbox",
      "id": "enable_search",
      "label": "Enable search",
      "default": true
    }
  ]
}
{% endschema %}