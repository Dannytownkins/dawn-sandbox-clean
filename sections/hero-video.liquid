{% comment %}
  Hero Video section with autoplay muted background and fallback image
{% endcomment %}

<section class="hero-video" data-section-id="{{ section.id }}">
  <div class="hero-video__media">
    {% if section.settings.video_mp4 != blank %}
      <video class="hero-video__video" autoplay muted loop playsinline {% if section.settings.show_controls %}controls{% endif %} poster="{{ section.settings.fallback_image | image_url: width: 1600 }}">
        <source src="{{ section.settings.video_mp4 }}" type="video/mp4">
        {% if section.settings.video_webm != blank %}
          <source src="{{ section.settings.video_webm }}" type="video/webm">
        {% endif %}
      </video>
    {% elsif section.settings.fallback_image != blank %}
      {{ section.settings.fallback_image | image_url: width: 1800 | image_tag: loading: 'eager', fetchpriority: 'high', alt: section.settings.heading }}
    {% endif %}
    {% if section.settings.overlay %}
      <div class="hero-video__overlay"></div>
    {% endif %}
  </div>
  <div class="hero-video__content">
    {% if section.settings.eyebrow != blank %}
      <p class="hero-video__eyebrow">{{ section.settings.eyebrow }}</p>
    {% endif %}
    <h1 class="hero-video__heading">{{ section.settings.heading }}</h1>
    {% if section.settings.subheading != blank %}
      <p class="hero-video__subheading">{{ section.settings.subheading }}</p>
    {% endif %}
    <div class="hero-video__actions">
      {% if section.settings.primary_label != blank and section.settings.primary_link != blank %}
        <a class="hero-video__cta hero-video__cta--primary" href="{{ section.settings.primary_link }}">{{ section.settings.primary_label }}</a>
      {% endif %}
      {% if section.settings.secondary_label != blank and section.settings.secondary_link != blank %}
        <a class="hero-video__cta hero-video__cta--secondary" href="{{ section.settings.secondary_link }}">{{ section.settings.secondary_label }}</a>
      {% endif %}
    </div>
  </div>
</section>

<style>
  .hero-video {
    position: relative;
    overflow: hidden;
    border-radius: 24px;
    color: #fff;
    min-height: min(80vh, 680px);
    display: grid;
    align-items: center;
    padding: clamp(32px, 5vw, 96px);
  }
  .hero-video__media {
    position: absolute;
    inset: 0;
    z-index: 0;
  }
  .hero-video__video,
  .hero-video__media img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .hero-video__overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(120deg, rgba(11,11,12,0.82) 0%, rgba(11,11,12,0.4) 55%, rgba(11,11,12,0.2) 100%);
  }
  .hero-video__content {
    position: relative;
    z-index: 1;
    max-width: 640px;
  }
  .hero-video__eyebrow {
    text-transform: uppercase;
    letter-spacing: 0.2em;
    margin-bottom: 12px;
    color: rgba(255,255,255,0.75);
  }
  .hero-video__heading {
    font-size: clamp(36px, 6vw, 72px);
    line-height: 1.05;
    margin: 0 0 16px;
    font-weight: 800;
  }
  .hero-video__subheading {
    font-size: clamp(16px, 2.2vw, 20px);
    max-width: 50ch;
    margin-bottom: 24px;
  }
  .hero-video__actions {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
  }
  .hero-video__cta {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 14px 28px;
    border-radius: 14px;
    font-weight: 700;
    text-decoration: none;
    transition: transform 0.2s ease;
  }
  .hero-video__cta:hover {
    transform: translateY(-2px);
  }
  .hero-video__cta--primary {
    background: #eded6b;
    color: #111;
  }
  .hero-video__cta--secondary {
    border: 2px solid rgba(255,255,255,0.6);
    color: #fff;
  }
  @media (max-width: 768px) {
    .hero-video {
      min-height: 70vh;
      border-radius: 18px;
    }
    .hero-video__actions {
      flex-direction: column;
      align-items: stretch;
    }
    .hero-video__cta {
      width: 100%;
    }
  }
</style>

{% schema %}
{
  "name": "Hero Video",
  "settings": [
    { "type": "text", "id": "eyebrow", "label": "Eyebrow", "default": "Light vs Dark" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Humor for every mood." },
    { "type": "textarea", "id": "subheading", "label": "Subheading", "default": "Autoplay hero with an optional fallback image for browsers that block video. Muted by default to keep LCP friendly." },
    { "type": "checkbox", "id": "overlay", "label": "Show overlay", "default": true },
    { "type": "checkbox", "id": "show_controls", "label": "Show video controls", "default": false },
    { "type": "text", "id": "video_mp4", "label": "MP4 video URL" },
    { "type": "text", "id": "video_webm", "label": "WebM video URL" },
    { "type": "image_picker", "id": "fallback_image", "label": "Fallback image" },
    { "type": "text", "id": "primary_label", "label": "Primary CTA label", "default": "Shop Light Humor" },
    { "type": "url", "id": "primary_link", "label": "Primary CTA link" },
    { "type": "text", "id": "secondary_label", "label": "Secondary CTA label", "default": "Shop Dark Humor" },
    { "type": "url", "id": "secondary_link", "label": "Secondary CTA link" }
  ],
  "presets": [
    { "name": "Hero Video" }
  ]
}
{% endschema %}
