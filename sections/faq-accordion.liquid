<section id="shopify-section-{{ section.id }}" class="section" style="max-width:1100px;margin:0 auto;">
  {% if section.settings.heading != blank %}
    <h1 class="h1" style="margin:0 0 8px;">{{ section.settings.heading }}</h1>
  {% endif %}
  {% if section.settings.subheading != blank %}
    <p style="opacity:.8;margin:0 0 16px;">{{ section.settings.subheading }}</p>
  {% endif %}
  <div class="faq">
    {% for b in section.blocks %}
      <details class="faq-item" {% if forloop.first %}open{% endif %}>
        <summary class="h4" style="cursor:pointer">{{ b.settings.q }}</summary>
        <div class="answer" style="opacity:.9;margin:8px 0 12px">{{ b.settings.a }}</div>
      </details>
    {% endfor %}
  </div>
  {% if section.blocks.size > 0 %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {% for b in section.blocks %}
      {
        "@type": "Question",
        "name": {{ b.settings.q | strip_html | strip_newlines | json }},
        "acceptedAnswer": { "@type": "Answer", "text": {{ b.settings.a | json }} }
      }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ]
  }
  </script>
  {% endif %}
</section>
{% schema %}
{
  "name": "FAQ accordion",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "FAQs" },
    { "type": "text", "id": "subheading", "label": "Subheading", "default": "" }
  ],
  "blocks": [
    { "type": "faq", "name": "FAQ", "settings": [
      { "type": "text", "id": "q", "label": "Question" },
      { "type": "richtext", "id": "a", "label": "Answer" }
    ] }
  ],
  "max_blocks": 20,
  "presets": [{ "name": "FAQ accordion" }]
}
{% endschema %}
