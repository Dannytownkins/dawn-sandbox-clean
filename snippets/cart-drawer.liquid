{% comment %}
  Mini cart drawer

  Usage:
  {% render 'cart-drawer' %}
{% endcomment %}

<div id="cart-drawer" class="cart-drawer" hidden aria-hidden="true">
  <div class="cart-drawer__panel" role="dialog" aria-modal="true" aria-label="Shopping cart">
    <div class="cart-drawer__header">
      <h2 class="cart-drawer__heading">Your Cart</h2>
      <button type="button" class="cart-drawer__close" data-close-cart aria-label="Close cart">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 5L5 15M5 5l10 10"/>
        </svg>
      </button>
    </div>

    <div class="cart-drawer__body">
      {% if cart.item_count == 0 %}
        <div class="cart-drawer__empty">
          <p>Your cart is empty</p>
          <a href="/collections/all" class="btn btn--primary" data-close-cart>Start Shopping</a>
        </div>
      {% else %}
        <div class="cart-drawer__items">
          {% for item in cart.items %}
            <div class="cart-line" data-line-index="{{ forloop.index }}">
              {% if item.image %}
                <img
                  src="{{ item.image | image_url: width: 100 }}"
                  alt="{{ item.image.alt | escape }}"
                  width="60"
                  height="60"
                  loading="lazy"
                  class="cart-line__image"
                >
              {% endif %}
              <div class="cart-line__body">
                <a href="{{ item.url }}" class="cart-line__title">{{ item.product.title }}</a>
                {% unless item.product.has_only_default_variant %}
                  <div class="cart-line__variant">{{ item.variant.title }}</div>
                {% endunless %}
                <div class="cart-line__meta">
                  <div class="cart-line__quantity">Qty: {{ item.quantity }}</div>
                  <div class="cart-line__price">{{ item.final_line_price | money }}</div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>

        <div class="cart-drawer__footer">
          <div class="cart-subtotal">
            <span>Subtotal</span>
            <span class="cart-subtotal__amount">{{ cart.total_price | money }}</span>
          </div>
          <p class="cart-drawer__note">Taxes and shipping calculated at checkout</p>
          <a href="{{ routes.cart_url }}" class="btn btn--secondary btn--full-width">View Cart</a>
          <button
            type="submit"
            name="checkout"
            form="cart-drawer-form"
            class="btn btn--primary btn--full-width"
            data-cta="begin-checkout"
          >
            Checkout
          </button>
        </div>

        <form action="{{ routes.cart_url }}" method="post" id="cart-drawer-form" novalidate>
          <input type="hidden" name="checkout">
        </form>
      {% endif %}
    </div>
  </div>
  <div class="cart-drawer__overlay" data-close-cart></div>
</div>
