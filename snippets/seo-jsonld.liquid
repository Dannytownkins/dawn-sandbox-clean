{%- comment -%} Organization + Website (always) {%- endcomment -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": {{ shop.name | json }},
  "url": {{ shop.url | json }},
  {% if settings.logo %}"logo": {{ settings.logo | image_url: width: 600 | json }},{% endif %}
  "sameAs": []
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": {{ shop.name | json }},
  "url": {{ shop.url | json }},
  "potentialAction": {
    "@type": "SearchAction",
    "target": {{ routes.search_url | append: "?q={search_term_string}" | json }},
    "query-input": "required name=search_term_string"
  }
}
</script>

{%- comment -%} Product (on product pages) {%- endcomment -%}
{%- if template.name == 'product' -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": {{ product.title | json }},
  "image": [{% for img in product.images %}{{ img | image_url: width: 1200 | json }}{% unless forloop.last %}, {% endunless %}{% endfor %}],
  "description": {{ product.description | strip_html | strip_newlines | truncate: 500 | json }},
  "sku": {{ product.selected_or_first_available_variant.sku | default: product.id | json }},
  "brand": { "@type": "Brand", "name": {{ product.vendor | default: shop.name | json }} },
  "offers": {
    "@type": "Offer",
    "url": {{ product.url | json }},
    "priceCurrency": {{ cart.currency.iso_code | json }},
    "price": {{ product.selected_or_first_available_variant.price | money_without_currency | replace: ",", "" | json }},
    "availability": "{% if product.selected_or_first_available_variant.available %}https://schema.org/InStock{% else %}https://schema.org/OutOfStock{% endif %}"
  }
}
</script>
{%- endif -%}

{%- comment -%} Breadcrumbs on collections {%- endcomment -%}
{%- if template.name contains 'collection' -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Home", "item": {{ shop.url | json }} },
    { "@type": "ListItem", "position": 2, "name": {{ collection.title | json }}, "item": {{ collection.url | json }} }
  ]
}
</script>
{%- endif -%}
