<div id="sticky-atc" hidden>
  <button id="sticky-atc-btn">{{ 'products.product.add_to_cart' | t }}</button>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.querySelector('form[action*="/cart/add"]');
    if (!form) return;
    const bar = document.getElementById('sticky-atc');
    const btn = document.getElementById('sticky-atc-btn');
    const io = new IntersectionObserver(
      ([e]) => {
        bar.hidden = e.isIntersecting;
      },
      { threshold: 0 }
    );
    io.observe(form);
    btn.onclick = () => form.requestSubmit();
  });
</script>

<style>
  #sticky-atc {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    background: #0b0b0c;
    color: #fff;
    display: flex;
    justify-content: center;
    padding: 10px;
    border-top: 1px solid #222;
    z-index: 80;
  }
  #sticky-atc-btn {
    all: unset;
    background: #eded6b;
    color: #111;
    font-weight: 800;
    padding: 12px 16px;
    border-radius: 12px;
    cursor: pointer;
  }
</style>
