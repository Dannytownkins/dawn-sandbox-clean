{% assign limit = 2 %}
{% assign pool = collections['all'] %}
{% assign in_cart_ids = '' | split: ',' %}
{% for it in cart.items %}{% assign in_cart_ids = in_cart_ids | push: it.product_id %}{% endfor %}
<style>
.xsell{margin-top:14px;padding-top:14px;border-top:1px solid rgba(255,255,255,0.08);background:transparent !important;}
.xsell h4{margin:0 0 10px;font-size:1rem;color:#fff;}
.xsell-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
.xsell .card{border:1px solid rgba(255,255,255,0.08);border-radius:12px;padding:10px;background:transparent !important;}
.xsell img{width:100%;height:auto;display:block;border-radius:8px;}
.xsell .title{font-size:.95rem;margin:6px 0 4px;color:#fff;}
.xsell .price{font-weight:600;margin-bottom:6px;color:#fff;opacity:0.9;}
</style>
<div class="xsell cart-recommendations">
  {%- assign upsell_heading = 'cart.upsells.heading' | t -%}
  {%- if upsell_heading contains 'translation missing' -%}{% assign upsell_heading = 'You may also like' %}{% endif %}
  <h4>{{ upsell_heading }}</h4>
  <div class="xsell-grid cart-rec-grid">
  {% assign shown = 0 %}
  {% for p in pool.products %}
    {% unless in_cart_ids contains p.id %}
      <div class="card cart-rec">
        <a href="{{ p.url }}" style="text-decoration: none; color: inherit;">
          {% if p.featured_image %}
            <img src="{{ p.featured_image | image_url: width: 600 }}" alt="{{ p.title | escape }}" class="cart-rec__img" loading="lazy">
          {% endif %}
          <div class="title cart-rec__title">{{ p.title }}</div>
          <div class="price cart-rec__price">{{ p.price | money }}</div>
        </a>
      </div>
      {% assign shown = shown | plus: 1 %}
      {% if shown >= limit %}{% break %}{% endif %}
    {% endunless %}
  {% endfor %}
  </div>
</div>
